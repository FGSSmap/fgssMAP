# FGSSmap - 国際総合科学部10周年記念マップ

## 🎉 プロジェクト概要

FGSSmapは、山口大学国際総合科学部の創設10周年を記念して制作されたインタラクティブな地図サイトです。歴代の学部生が世界各地で過ごした貴重な体験や思い出の場所を、美しいビジュアルとともに地図上に表示します。

## ✨ 主要機能

### 🗺️ **マルチレイヤー地図システム**
- **キャンパス周辺**: 山口大学周辺の施設・観光地
- **日本地図**: 都道府県選択式のインタラクティブマップ  
- **世界地図**: 地域別ズーム機能付きグローバルマップ

### 📍 **高度なプレースマーク機能**
- **画像表示**: KMLファイルから自動的に画像を抽出・表示
- **座標ズーム**: 各プレースマークから直接地図上の詳細位置にズーム
- **詳細情報**: 施設の説明、写真、位置情報を美しいカードレイアウトで表示
- **外部リンク**: Google Maps連携でさらなる詳細確認が可能

### 🌏 **世界地図地域選択**
- **5地域対応**: アジア、ヨーロッパ、アフリカ、オセアニア、北米
- **動的ズーム**: 地域選択に応じて最適な範囲とズームレベルを自動調整
- **設定外部化**: `region-settings.json`で地域設定を簡単管理

### 🎨 **モダンなUX/UI**
- **レスポンシブデザイン**: デスクトップからスマートフォンまで完全対応
- **スムーズアニメーション**: ズーム時の視覚的フィードバック
- **アクセシビリティ**: ARIA属性、キーボードナビゲーション対応
- **ローディング状態**: 非同期処理中の適切なフィードバック

## 🚀 **新機能ハイライト**

### **インライン地図ズーム機能**
プレースマークカードの「地図で確認」ボタンをクリックすると：

1. **スムーズアニメーション**で現在の地図が変化
2. **高解像度ズーム**（ズームレベル18）で詳細位置を表示  
3. **リセットボタン**で元の地図表示に簡単復帰
4. **視覚的通知**でユーザーに操作状況をフィードバック

## 📁 ファイル構成

```
FGSSmap/
├── index.html              # メインHTML（semantic HTML5）
├── style.css               # モダンCSS（CSS Variables活用）
├── script.js               # 高機能JavaScript（ES6+）
├── fonts.css               # フォント最適化設定
├── region-settings.json    # 地域別地図設定
├── placemark/
│   └── campus.kml         # キャンパス周辺プレースマークデータ
├── FGSSmap-icon.png       # サイトアイコン
└── README.md              # プロジェクト説明書
```

## 🛠️ 技術仕様

### **フロントエンド**
- **HTML5**: セマンティック構造、アクセシビリティ対応
- **CSS3**: CSS Variables、Flexbox/Grid、アニメーション
- **JavaScript ES6+**: モジュラー構造、非同期処理、DOM操作

### **外部サービス連携**
- **Google Maps Embed API**: 地図表示とナビゲーション
- **Google Fonts**: Noto Sans JP、Inter、Hachi Maru Pop
- **Font Awesome**: アイコンライブラリ

### **データ管理**
- **KMLファイル**: 地理空間データの標準形式
- **JSON設定**: 地域別パラメータの外部管理
- **非同期読み込み**: fetch APIによる効率的データ取得

## 🎯 ユーザー体験

### **キャンパス周辺モード**
1. 山口大学周辺の地図を表示
2. 観光地・施設のプレースマークカードを表示
3. 各カードから画像・詳細情報・地図ズームが可能

### **日本地図モード**  
1. インタラクティブな都道府県選択
2. ホバーエフェクトによる視覚的フィードバック
3. 都道府県クリックで詳細地図に遷移

### **世界地図モード**
1. グローバルマップの表示
2. 地域選択ドロップダウンによる範囲調整
3. 選択地域の名称表示とリセット機能

## 🔧 カスタマイズ

### **新しい地域の追加**
`region-settings.json`を編集：

```json
{
  "new-region": {
    "center": "緯度,経度",
    "zoom": "ズームレベルz", 
    "name": "地域名"
  }
}
```

### **プレースマークデータの追加**
KMLファイルに新しいPlacemarkタグを追加：

```xml
<Placemark>
  <name>施設名</name>
  <description><![CDATA[
    <img src="画像URL" height="200" width="auto" />
    <br><br>説明文
  ]]></description>
  <Point>
    <coordinates>経度,緯度,0</coordinates>
  </Point>
</Placemark>
```

## 📱 レスポンシブ対応

- **デスクトップ**: フル機能、マルチカラムレイアウト
- **タブレット**: 適応レイアウト、タッチ最適化
- **スマートフォン**: 1カラム、モバイルファーストUI

## ♿ アクセシビリティ

- **ARIA属性**: スクリーンリーダー対応
- **キーボードナビゲーション**: Tab順序最適化
- **高コントラストモード**: prefers-contrast対応
- **フォーカス管理**: 論理的なフォーカス移動

## 🔧 最新の修正・改善

### **2024年9月21日 - 日本地図表示問題の完全解決**

**問題**: 日本ボタンクリック時に地図が表示されない
- ❌ 原因: ボタンID（`jp-button`）と地図表示関数（`japan`）の不一致
- ❌ 原因: 不完全なSVGデータ（4都道府県のみ）

**解決策**:
- ✅ ボタンIDを`jp-button`から`japan-button`に統一
- ✅ 完全な47都道府県SVGを直接埋め込みに変更
- ✅ fetch APIの404エラーを回避し、安定した表示を実現

**結果**:
- 🎉 全47都道府県の日本地図が正常表示
- 🖱️ 各都道府県のホバー・クリックイベントが正常動作
- 🚀 高速で安定した地図切り替えを実現

### **2024年9月21日 - 都道府県クリック機能の完全実装**

**新機能**: 都道府県クリック → 専用地図表示 → 戻るボタン
- ✅ `map-links.json`による47都道府県地図URL管理
- ✅ 都道府県クリック時の地図置き換え機能
- ✅ 日本地図SVG ⇄ 都道府県iframe地図の切り替え
- ✅ スタイル付き戻るボタンとスムーズアニメーション

**技術実装**:
- 🗺️ JSON設定ファイルによる外部地図URL管理
- 🖱️ インライン地図切り替え（モーダル不使用）
- 🎨 統一されたUI/UXデザイン
- 🔄 状態管理とDOM操作の最適化

## 🚦 今後の拡張予定

- [ ] 多言語対応（英語・中国語・韓国語）
- [ ] プレースマーク検索・フィルタリング機能
- [ ] ユーザー投稿システムとの連携
- [ ] ソーシャル共有機能
- [ ] オフライン対応（Service Worker）

## 👨‍💻 開発者向け情報

### **ローカル開発**
```bash
# HTTPサーバーで起動（CORS対策）
python -m http.server 8000
# または
npx serve .
```

### **デバッグ情報**
- コンソールログで詳細な処理状況を出力
- エラーハンドリングによる適切なフォールバック
- ローディング状態の可視化

## 📄 ライセンス

このプロジェクトは山口大学国際総合科学部の10周年記念事業として制作されました。

---

**🎓 FGSS 10th Anniversary Project**  
**山口大学国際総合科学部創設10周年記念**
